---
id: safety
title: safety
author: Adrian Yang
author_title: Front End Engineer
author_url: https://github.com/Druidss
author_image_url: https://avatars2.githubusercontent.com/u/40681152?s=460&u=e324c1f3465c768888c1fcf798b5f5eb1be9d60d&v=4
tags: [JavaScript, safety FrontEnd]
---



### 什么是 XSS 攻击？如何防范 XSS 攻击？

> XSS指的是跨站脚本攻击，

恶意攻击者会通过某种方式对页面中注入额外JS代码，对页面进行修改或是窃取cookies，影响用户体验以及造成用户信息的不安全。

XSS攻击可分为两种，

1. 一种是反射型，攻击者可将恶意代码加载url地址中，当用户操作页面向服务器提交url时，服务器会提取url中的参数包括了恶意代码，并传递给客户端执行时会就执行那些恶意代码，这是反射型。
2. 另一种是储存型，攻击者将恶意代码存放在数据库中，当用户将从数据库中获取数据时会获取到那些恶意代码，然后传到浏览器端执行。

防范：

1. 浏览器端提交代码时：可对代码进行转义处理，但不同的代码提交位置不同,因此将所有js代码进行转义处理不是好的方法。

2. 浏览器端执行代码时：可为http头部设置`http-only`属性，意味着cookies不能通过js脚本获取，这样保证了cookies的安全性。还可以使用验证码，防止攻击者伪装成用户进行操作。还可以使用CPS，为浏览器建立一个白名单，通过白名单告知浏览器哪些资源可以得到访问，防止恶意代码的访问和攻击。

### 什么是 CSP？

CPS指的是内容安全策略，它的本质是建立一个白名单，告诉浏览器哪些外部资源可以访问和获取。我们只需要配置规则，然后由浏览器去获取。

可以通过两种方式配置CSP，一种是通过http头部设置'Content-Security-Policy'，另一种是meta标签设置http-equiv='Content-Security-Policy'。

### 什么是 CSRF 攻击？如何防范 CSRF 攻击？

CSRF指的是跨站请求伪造，

攻击者利用相关网站对用户身份的信任来窃取用户信息甚至涉及用户安全。例如用户登录网站A，由于已通过网站A的用户身份验证，因此在没退出的情况下可访问，当用户无意通过恶意网站再次访问网站A时，恶意网站会欺骗网站A，让其误以为是用户本意登录，实质上是恶意网站的一种欺骗行为。

防范：

1. 验证refener信息，查看登录来源，但这种方式容易被篡改。
2. 采用token验证身份信息。服务器端会向客户端返回一个随机数，作为身份令牌，当再次访问时客户端将这个随机数存请求参数中，服务器端会检验这个身份令牌是否符合，但这种方式的缺点是我们需要为每个服务端都储存一个token，这样会比较繁琐，同时一般不会只对应一个服务器当我们进行负载平衡时，请求会被转移到其他服务器上，这样就要重新生成token。
3. 双重cookies方式，服务器端会将cookies返回给客户端，当客户端再次发起请求时，会将cookies的信息存放在url参数中，服务器会将cookies中的数据和url中的参数进行对比，来判断是否请求来自于恶意网站，这是利用了攻击者只能访问cookies而不能获取cookies的特点。
4. 可以对cookies设置Samesite属性，限制cookies不能被第三方所获取。

#### SQL 注入攻击？

SQL是结构化查询语言，是一种特殊目的的编程语言，是一种数据库查询和结构设计语言，用于存储数据以及查询、修改、添加和删除等操作关系型数据库。

SQL注入指的是用户在进行http请求时注入恶意的SQL代码，服务器在使用参数构建数据库SQL命令时，恶意SQL被一起构建，破坏原有SQL结构，并在数据库中执行，达到意料之外的结果的攻击行为。